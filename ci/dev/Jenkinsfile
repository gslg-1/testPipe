node
{
    // Variables Declaration:
    String s_wdir="pipe_wdir/"
    String s_localBranch="local-Branch"
    int success = 0;
    
    stage('Start')
    {
        File f_wdir;
        File f_currDir;
        f_currDir = new File('.');
        f_wdir = new File(s_wdir);
        // Routine:
        // Create Work Directory
        f_currDir.eachDirMatch(s_wdir,
        {
            string msg;
            println(msg+"Match: "+it);
        });
        if(!f_wdir.exists)
        {
            f_wdir.mkdir();
        }
        // Git Checkout:
        //checkoutGitRepository(s_wdir,$GIT_URL,credential)
        sh('''
            cd $s_wdir
            git clone $GIT_URL
            git checkout -b $s_localBranch
        ''')
    }
    stage('List')
    {
        echo 'List'
    }
    stage('Build')
    {
        echo 'Build'
        // Execute Build of Code
        // Execute Doxygen
    }
    stage('Test')
    {
        parallel StaticCodeAnalysis:
        {
            echo 'Static Code Analysis'
            // Execute Analysis of all Modules
        }, 
        UnitTest:
        {
            echo 'Unit Test'
            // Execute Unit Test of all Modules
        }
    }
    stage('Deploy')
    {
        echo 'Deploy'
        sh('''git add''')
    }
    stage('Stop')
    {
        println('ls'.execute().text);
        
        println('ls'.execute().text);
    }
    success = 1;    
    if( success == 1)
    {
        // After Success:
        echo "Successfull Pipeline run."
    }
    else
    {
        // After No Success:
        echo "Unsuccessfull Pipeline run."
    }
    println('ls'.execute().text);
    // Always:
    //if ( f_wdirExist == 1)
    //{
    //    println(['cd','..'].execute().text);
    //    if(f_wdir != null)
    //    {
    //        f_wdir = new File(s_wdir);
    //    }
    //    f_wdir.deleteDir();
    //}
}





/**
* @description: This function is used to delete all files at a especial location
* @param:
*       -path: Add a String with the 
*/
int deleteDir(path)
{
    if (path?.trim())
    {
        respond = 'rm -fr $path'.execute();
        println(respond);
        return 0;
    }
    return 1;
}

/**
* @description: This function is used to delete all files at a especial location
* @param:
*       -path: Add a String with the 
*/
String listModules(path)
{
    //if (path?.trim())
    //{
        return 'ls $path | grep "*.h" | sed s/.h//h'.execute().text;
    //}
    //return ""
}

/**
* @description: This function is used to delete all files at a especial location
* @param:
*       -path: Add a String with the 
*/
void printSh(cmd)
{
   def sout = new StringBuilder();
   def proc = cmd.execute();
   println(proc.text);
}